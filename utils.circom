
pragma circom 2.0.3;
template Multiplier2 () {  

    // Declaration of signals.  
    signal input in1;  
    signal input in2;  
    signal output out;  
    
    // Constraints.  
    out <== in1 * in2;  
}
     
template MultiplierN (N){
    //Declaration of signals and components.
    signal input in[N];
    signal output out;
    component comp[N-1];

    //Statements.
    for(var i = 0; i < N-1; i++){
        comp[i] = Multiplier2();
    }

        comp[0].in1 <== in[0];
        comp[0].in2 <== in[1];
        for(var i = 0; i < N-2; i++){
        comp[i+1].in1 <== comp[i].out;
        comp[i+1].in2 <== in[i+2]; 
        }
        out <== comp[N-2].out; 
}

template Poseidon4() {
    signal input in1;
    signal input in2;
    signal input in3; 
    signal input in4; 

    signal output out; 

    component p = Poseidon(4);
    p.inputs[0] <== in1;
    p.inputs[1] <== in2;
    p.inputs[2] <== in3;
    p.inputs[3] <== in4;

    out <== p.out;
}

template PoseidonMulti(N) {
    signal input in[N];
    signal input blind;
    signal output out;

    var nHashes = N\3;

    component hashes[nHashes];

    for (var i = 0; i < nHashes;i++) { 
        hashes[i] = Poseidon4();
    }

    var cursor = 0;
    hashes[0].in1 <== blind; 
    hashes[0].in2 <== in[0];
    hashes[0].in3 <== in[1];
    hashes[0].in4 <== in[2];
    
    cursor+=2;

    for (var i = 0; i < nHashes-1; i++) {
        hashes[i+1].in1 <== hashes[i].out;
        hashes[i+1].in2 <== in[cursor+1];
        hashes[i+1].in3 <== in[cursor+2];
        hashes[i+1].in4 <== in[cursor+3];
        cursor+=3;
    }

    var rem = N%3;
    if (rem==0) {
        out <== hashes[nHashes-1].out;
    } else {
        component final = Poseidon(rem+1);
        final.inputs[0] <== hashes[nHashes-1].out;
        for (var i=1; i<=rem; i++) { 
            final.inputs[i] <== in[cursor+i];
        }
        out <== final.out;
        
    }

}
function rootsTrans(i) {
	var roots[1664] = [8412,3342,8360,5656,5955,1730,5513,11056,19670,53,12546,12624,15172,17304,6189,18786,11857,3433,18487,21347,6267,6410,17785,12156,7060,10211,16472,17408,18721,2965,3758,20892,13378,6540,4889,13651,15978,20190,14015,7307,19514,2497,20346,2861,5305,13716,8990,15835,20359,9283,14756,17967,11017,21477,4057,19904,10926,8815,11368,21035,10315,768,807,4226,5136,7281,7073,15341,16875,17733,2718,18318,20801,21243,1912,5682,15003,11472,13586,21470,9920,7034,6397,2796,3602,17512,3095,4902,183,6709,8516,18734,16641,1457,7580,7892,21061,18760,13794,274,19501,7320,7515,20203,6319,5825,12013,14054,10302,10835,21217,15796,950,5500,10133,19150,1418,16134,326,11459,13495,16862,3446,7216,2016,6904,10900,8347,2172,15081,13404,6436,6631,3576,18773,6072,11121,13092,13313,6059,4499,11896,20021,18344,9517,5448,17798,15640,15250,14847,6475,10341,13833,716,15315,7866,8633,13625,21126,4044,10406,222,12331,8977,17551,12767,21295,19813,8750,9465,1834,6761,16823,12845,16940,10263,11740,2679,11675,20307,13326,15458,8204,7125,2432,8828,12104,7424,11974,17928,19293,3654,8964,9569,7463,13352,17837,14821,4070,17226,14366,18890,10705,7606,11329,2926,8178,6813,11948,1678,14691,13924,19020,2419,4174,6241,8711,10172,6917,10198,1470,15575,16368,18929,13287,19059,20762,20840,16537,13950,9101,8685,9881,17629,3823,18305,18968,8386,15497,8529,8932,1925,16680,20151,17083,20281,21373,521,339,131,1210,1808,5721,4811,11082,5487,8854,15159,13235,5929,15965,17525,14119,3459,20164,5097,13066,378,7528,18500,20333,20671,2601,6800,11688,21412,7333,19618,18045,4707,8009,1860,2120,5344,5032,6748,8568,13001,18175,9387,18903,16251,8282,7489,11818,16017,14834,3745,13898,19124,4733,92,18016,21074,19774,18695,820,16602,14925,5773,4941,9491,4863,15120,5123,4668,12494,19603,5461,20216,3615,20866,15536,2549,40,8789,14730,2783,4473,11212,2055,12239,13079,5643,7229,12585,13872,16719,19241,3329,7112,15692,16693,3160,13196,2770,1119,19696,18071,3966,1405,11883,11446,10679,13521,7008,11485,17460,13807,8334,14392,17213,2627,18552,11524,2302,482,16576,9790,9907,12949,2809,833,5552,13209,4538,12611,18955,12252,17772,20567,18981,12344,21113,4278,10003,19982,18422,2367,14652,13976,12442,7658,8074,9335,10055,12318,12637,6020,6956,10081,3472,12689,9530,13755,17096,6566,6878,3394,4239,10224,12039,5370,14093,14028,11662,12292,976,8776,11537,15757,16706,2978,7554,7762,20723,20983,21399,5409,3381,10432,5812,17187,16654,4135,15731,9296,6592,16381,20294,16303,19488,5539,15354,443,15822,4187,16927,6553,16511,703,2146,15887,16563,14795,10289,13456,10575,12370,13144,19839,13820,17915,10887,16108,19852,5916,10510,6969,13027,21516,16407,18084,10757,3147,7788,4850,9075,16095,19475,5877,9894,4967,21191,15263,8763,20489,21594,10640,20775,1587,19111,6033,18370,18448,19657,6228,846,3485,8139,13742,20372,20931,20710,17980,781,4304,3303,5760,15679,2380,4148,18435,10536,20112,19878,3407,4213,8724,11935,13547,8646,14158,3277,14223,7138,15276,14509,13053,18838,3628,14184,19072,2445,3979,11641,9374,989,7645,18864,19527,20034,15068,8113,20879,20645,21048,2640,5617,6124,12806,4512,1691,2224,19891,20814,6488,2887,11277,1743,5019,16264,14886,11355,6839,6891,10328,9868,16329,6683,17031,11069,12468,12572,12793,18630,612,3797,5084,27,6150,7775,599,8802,9990,12871,14327,14002,15393,7359,16225,11550,15627,15705,12169,17941,18383,19254,20060,937,17018,20944,9822,1548,6202,560,8490,13417,15094,16290,1652,12533,1379,3173,8152,1262,4525,8295,12065,2952,9413,5227,10783,14704,6098,17486,8951,18461,18656,13248,6787,7749,6306,7814,534,3056,8672,10939,14444,15367,6605,17603,19787,430,17538,20476,8607,3030,10796,287,20827,18058,9972,17330,1795,4421,11628,12357,3199,1132,10120,11602,12897,9270,17343,18396,18565,6423,4083,7541,12279,1964,14613,18916,18292,1522,14912,9751,16056,11108,8555,13560,17395,3680,7450,365,19800,1782,14275,10393,12403,6007,19163,1938,690,20385,9738,6280,8911,10952,1249,10562,8893,3849,6865,10653,16494,15653,16004,16849,8269,15016,11779,16498,79,2133,5851,9426,21360,9803,16966,15588,9166,12221,13157,14405,10159,17135,20411,18240,3927,4629,12728,6501,14964,3719,14873,8087,17668,16394,12195,19215,7736,4486,5396,15380,17447,19462,5578,14782,3732,5253,12052,13911,11433,2874,19436,1015,20593,8477,20515,6345,1600,15744,1067,7099,21503,11030,1041,14639,2822,3706,7632,8100,21607,6371,2081,8321,12520,8169,9478,14236,2757,4343,6657,8737,14301,14678,21425,1561,18110,1613,4720,14314,20918,10614,13885,17746,19007,17681,3784,6826,8924,21321,18799,15198,19943,9855,16277,2666,8867,16888,7242,16810,235,1275,13534,4798,13573,20255,2536,6111,13014,6257,9504,3537,7502,8503,391,170,3667,15991,8035,2653,17382,12383,12975,11394,12832,10913,7996,1951,7619,15133,17863,17044,4551,17993,20437,21451,5292,19358,4694,19384,11805,1756,2692,105,872,1769,5591,13989,15289,1093,20684,404,13690,20957,7697,11649,9673,19956,15055,10666,3550,4681,10601,3875,13664,14483,755,12858,12910,13131,16979,17005,14041,18526,16030,2939,15419,20606,10848,18097,3017,4785,6943,12507,8243,3043,4915,3589,18149,794,3953,3121,16355,14197,17070,9244,11316,21529,19709,19748,9725,9777,16914,14626,20463,14522,16082,21165,6579,9016,11303,10380,573,1314,7372,14743,16238,17421,7957,17109,4408,21555,1873,3316,12650,6527,15783,9309,898,7671,11147,11199,12396,17902,10471,15809,15939,21334,5994,11498,10497,12962,11714,16797,11407,2848,1106,12715,19319,11727,8451,17694,3420,5864,19098,5669,14340,21308,6046,11381,15861,21490,9712,14951,1197,1497,10588,1977,5565,10770,13118,9561,9634,10822,15926,11342,9933,16342,313,4839,13222,8022,10016,7723,15237,16147,17265,8841,1340,10276,2107,677,12078,9348,21542,14899,11095,18123,14145,18409,7385,8698,3082,19332,2211,10042,13443,6670,2614,19033,508,15549,4564,15770,4759,17759,469,1990,11251,8256,8230,8061,664,1366,10809,4590,13781,15328,15874,20736,20632,1288,18019,4096,6085,10419,13183,18032,66,3108,7190,118,14717,17174,9693,11589,17720,18812,5526,9153,16316,18357,6982,7840,10068,10692,6163,11615,19046,1899,5279,10146,5175,261,9361,4200,12026,14470,17369,11766,19410,15913,20554,3693,1626,2263,5968,18682,1509,924,17473,4876,4746,14587,13274,17954,20788,8425,11004,21204,17239,14171,1639,11701,19969,10978,495,7827,5630,2315,6735,9179,2003,742,19683,4993,5838,14535,4954,14353,20580,196,9003,10484,2835,15107,16992,5071,18851,21269,4577,8308,16459,3836,5331,14379,17356,3992,19995,10718,12143,11043,5240,7983,16953,4447,15185,7021,625,4616,1392,6722,6930,17434,20528,13768,15601,20268,144,21022,12936,14106,16160,12702,20424,2588,17876,4928,16043,15432,9829,2393,2484,13430,14457,2913,3888,1184,6995,10029,9088,1431,18708,5162,7411,9621,3940,7684,2354,2510,14249,15042,19137,14,157,19202,21581,10354,16550,4356,12429,21386,10731,3810,14561,4317,3264,18279,248,7047,13469,7476,18643,13365,4265,16212,12741,4772,15952,17057,20502,15406,352,12663,7801,1236,3914,7398,7710,11987,13300,9192,19280,17707,17655,13261,4603,7086,5734,9595,18331,18877,21100,19605,16628,20541,6514,2406,5799,13846,2198,20853,1704,4330,19826,18214,3004,8438,2328,18474,2458,547,3511,3225,3186,5058,8373,1,4018,10744,11186,18136,8217,19761,1886,11792,15211,13482,1717,3134,5903,5201,8581,10107,13859,11563,14431,5318,20970,21152,3524,16589,9764,20749,12780,9400,18253,18513,1574,9042,20658,13391,3498,15562,9582,10185,9660,6358,12455,586,14262,16615,7255,11831,10991,2237,456,1080,209,3901,7177,4161,7268,11173,9231,9608,13612,16433,14210,16745,10237,17499,4005,5942,6696,1158,7918,17577,20242,4291,20229,20996,21282,19865,19930,9959,21620,15900,5266,1483,6176,11225,9322,9543,15614,19189,13937,16121,17811,6137,17278,11238,19371,4031,16186,2731,12988,21009,17161,19735,18188,14288,6332,6384,15484,15445,10861,12000,10965,4395,9055,8620,2575,14496,19345,15848,5708,5149,17291,14860,16758,5435,7970,8659,17850,11870,20125,20697,12260,4109,7151,13638,15302,1145,11511,11922,12481,5214,14418,1002,5422,10367,2341,11844,11909,12305,7203,12754,2094,5006,11290,12416,14080,14816,15029,16199,4369,5383,638,16667,17616,18578,20450,2900,21139,7593,16784,2042,10094,6852,11420,19085,18604,4460,10874,12130,1223,9114,19566,5890,19722,16524,6618,12182,20008,4122,19306,729,7879,17824,20047,4642,10627,14665,15666,6449,14548,18994,20177,1821,2562,4655,5695,2705,7164,8880,13599,19176,5357,859,19449,17200,14769,5474,5786,12559,7905,2185,1665,18825,9946,417,4382,6215,11160,21087,16732,12117,3355,19553,3251,7567,9257,5981,13729,11134,9647,9140,3238,3290,14990,15718,16836,11753,9068,3368,9029,13508,15510,2276,11264,12208,12676,15523,16771,17252,13040,18669,18942,14938,6462,7346,6644,18617,13963,16173,8542,17317,21438,1054,13703,2029,18162,2523,11576,5045,2250,300,19267,14977,7931,18227,17564,20905,1171,2471,13339,20086,20320,3641,21568,3212,18201,1444,8464,12598,12889,9218,14600,18539,19631,8191,6774,6293,18591,2068,12091,8399,19228,20619,4824,9127,9439,15146,19579,10458,5188,7853,5747,8594,12923,14132,15471,7944,17148,18747,16069,19423,20073,3069,19397,20099,9452,14574,5110,21178,4252,19917,885,13170,11961,9205,10549,10445,1847,7294,10250,1353,7437,15224,4434,16901,963,9842,14067,16446,17642,13677,1535,911,1301,17889,19644,17122,21230,8048,1028,3862,2991,16420,8126,20398,21256,12819,2289,9699,18266,13105,651,3563,10523,17590,2744,19540,5604,1327,20138,4980,2159,3771];
	return roots[i];
    }
function rootsMatch(i) {
	var roots[1] = [6];
	return roots[i];
    }
