
pragma circom 2.0.3;
template Multiplier2 () {  

    // Declaration of signals.  
    signal input in1;  
    signal input in2;  
    signal output out;  
    
    // Constraints.  
    out <== in1 * in2;  
}
     
template MultiplierN (N){
    //Declaration of signals and components.
    signal input in[N];
    signal output out;
    component comp[N-1];

    //Statements.
    for(var i = 0; i < N-1; i++){
        comp[i] = Multiplier2();
    }

        comp[0].in1 <== in[0];
        comp[0].in2 <== in[1];
        for(var i = 0; i < N-2; i++){
        comp[i+1].in1 <== comp[i].out;
        comp[i+1].in2 <== in[i+2]; 
        }
        out <== comp[N-2].out; 
}

template Poseidon4() {
    signal input in1;
    signal input in2;
    signal input in3; 
    signal input in4; 

    signal output out; 

    component p = Poseidon(4);
    p.inputs[0] <== in1;
    p.inputs[1] <== in2;
    p.inputs[2] <== in3;
    p.inputs[3] <== in4;

    out <== p.out;
}

template PoseidonMulti(N) {
    signal input in[N];
    signal input blind;
    signal output out;

    var nHashes = N\3;

    component hashes[nHashes];

    for (var i = 0; i < nHashes;i++) { 
        hashes[i] = Poseidon4();
    }

    var cursor = 0;
    hashes[0].in1 <== blind; 
    hashes[0].in2 <== in[0];
    hashes[0].in3 <== in[1];
    hashes[0].in4 <== in[2];
    
    cursor+=2;

    for (var i = 0; i < nHashes-1; i++) {
        hashes[i+1].in1 <== hashes[i].out;
        hashes[i+1].in2 <== in[cursor+1];
        hashes[i+1].in3 <== in[cursor+2];
        hashes[i+1].in4 <== in[cursor+3];
        cursor+=3;
    }

    var rem = N%3;
    if (rem==0) {
        out <== hashes[nHashes-1].out;
    } else {
        component final = Poseidon(rem+1);
        final.inputs[0] <== hashes[nHashes-1].out;
        for (var i=1; i<=rem; i++) { 
            final.inputs[i] <== in[cursor+i];
        }
        out <== final.out;
        
    }

}
function rootsTrans(i) {
	var roots[1664] = [417,14782,18552,1288,2198,10900,1470,11576,11701,13781,13885,19865,14041,16589,833,2562,8911,3511,7255,14015,1808,11056,10445,19111,19280,2601,2419,5370,1600,11446,13872,8672,14054,3459,3316,16043,14821,14301,11485,11792,19215,2640,6163,10276,378,9621,17135,18162,4642,6176,7736,1899,9101,3225,6150,7398,6852,7476,13352,12239,10341,16433,3290,716,2367,2744,3381,10705,12370,15822,15250,10042,13755,16303,17447,16797,17577,18591,5630,20242,3498,14795,17226,19462,4070,12383,9257,20788,20983,11407,19683,664,11030,15003,5877,3004,1925,8477,13222,11082,13430,21438,1145,18279,4174,14912,14964,15211,1730,4434,12715,10744,3602,14704,18825,14483,19059,20723,3238,5526,7229,12104,1028,4057,16264,20021,5851,17460,21126,9068,3797,4200,14288,21373,19020,11727,8100,11108,2211,21542,16602,9751,9829,6293,3251,6592,1756,2549,10107,2783,17044,19566,9920,1938,10393,5071,16914,7788,10419,10458,16056,14366,17720,18981,20671,16550,4239,11753,18032,7541,15627,18016,20034,6475,10146,16394,5929,21308,2926,5162,12533,15263,5279,8516,5227,7151,15536,15653,6722,15666,16862,9517,17434,20710,12689,5240,15328,17369,20697,18383,5578,19501,11563,11688,12331,6280,10783,2302,6826,18240,9192,4850,1184,10627,4954,3082,16706,391,18227,1497,5799,404,11095,8620,15705,547,15783,742,1444,17395,16004,16160,14327,3394,5903,10835,17304,15484,20164,21178,21529,1977,2133,13183,4707,3433,11870,20099,5721,5513,10289,12195,17278,20593,9504,11974,5357,2016,4798,9055,18435,1054,365,10302,1704,4993,10601,21100,20632,8230,1314,1678,10874,12767,15406,8776,235,8009,9114,19033,9075,3901,3927,4447,4512,21204,15237,8789,9946,11225,3849,16212,16446,14132,6891,4694,1483,4486,5188,8126,11160,6956,11602,12403,10003,3771,9140,13573,15133,10198,17564,17915,19358,2731,13521,5955,8360,6257,12396,11134,17265,20138,10081,15523,3810,20567,4031,20866,19603,21139,12624,2913,16641,20203,19657,14392,6969,14574,19943,15900,4603,4839,21256,9972,7073,6579,19917,11251,8990,17161,10497,19085,13300,3758,5019,8880,10809,11121,14171,16368,17148,3706,3069,8542,10653,15146,15757,8977,15471,2263,4408,10588,15107,6878,15679,19527,20424,5669,18123,2042,5097,9842,6904,10120,9959,17629,6462,5786,2484,7801,3108,1301,1262,8854,13378,16342,17668,521,18955,21087,2679,1626,8815,9127,17031,14145,16953,15861,20645,20827,10432,14431,19982,20294,20398,7021,18630,5318,9296,18409,21594,14743,19722,1548,3030,17876,6748,12936,9822,14314,8048,9205,1639,4629,9990,2354,19475,10237,12252,7593,17408,4122,18747,9309,13508,15159,14197,12305,15055,911,7515,13495,14769,15224,15549,2029,7424,1405,4096,5500,5539,5825,1132,12091,12221,8951,7294,14210,18331,18864,21386,1522,18773,4044,651,5396,14353,4525,5461,6787,11004,10692,11316,3836,7645,12026,9400,14457,9029,16654,17863,20229,20268,17005,6514,16407,12676,20684,7918,5890,21113,15198,4772,11589,40,9335,1964,1847,7814,5045,1691,10354,19631,9777,625,13989,16901,18929,19670,16082,3368,3160,1990,5942,1002,11264,13950,14002,963,14093,820,10822,5409,18708,3719,12013,20957,9907,16771,79,18461,17252,2653,4252,14730,4460,16277,3537,5760,7307,2406,5058,10926,11948,16355,20775,8087,18643,21165,8464,21347,183,18565,1249,4109,16992,8607,19618,20606,8802,19891,4863,1106,1652,16680,18734,2172,19163,11818,7957,10263,14379,21269,20008,14860,10575,9003,7047,9868,6397,6540,482,18201,17850,14886,2068,20619,2146,19137,9491,19306,10159,9348,19553,8685,12858,19176,3576,7840,11173,9088,8581,6605,6059,20996,3914,16511,1379,9016,14678,19267,469,9153,9270,4551,18487,19410,7450,21048,11433,15510,7164,8646,8893,17187,11303,10848,8924,8412,12806,2185,10016,12741,4655,12988,13040,2250,6670,14509,15042,17473,19540,10731,20541,18045,6774,7333,11909,16537,14847,12039,18305,13287,14938,6306,12663,13248,4746,2094,13053,16667,10913,9413,5006,4590,13170,7086,15796,352,7671,14249,3628,4395,8169,12780,11420,12292,196,12572,9374,5214,12169,13586,9452,12182,13729,13963,17590,17616,16108,17837,1171,4733,18318,12052,20151,6488,13404,10549,15770,21451,6553,16576,3823,6020,15991,3745,5708,20515,6410,5253,2965,16134,8399,2627,3355,18357,638,11511,13651,14405,7892,17070,17174,21581,2887,3407,12897,2003,3641,21555,18097,508,14899,7606,3173,7034,20086,3446,7060,690,6631,17018,17759,10562,10367,18851,4291,18656,17538,4980,10965,18500,755,1509,9179,18669,10718,20489,13118,21516,5331,2120,2900,768,1067,9608,17694,4018,10679,8724,14639,7489,15939,21477,9699,10952,3615,16810,21009,21022,11147,13274,15601,92,2055,14990,18292,16069,7827,16095,6085,729,12208,19319,20385,2081,13105,6371,3199,17083,17681,7281,13859,5968,7528,2289,10055,10510,9894,8191,15445,13547,11857,20177,19748,13482,10328,6007,20658,586,20762,4824,8321,1886,3121,18526,21061,4681,14067,15315,7723,118,313,4161,4265,5032,13456,3862,6865,8750,15575,17486,7112,21425,4473,13209,1821,4902,6527,11641,6423,9634,6098,13807,19839,15692,3329,13625,19202,20047,15419,20502,1392,4499,15172,14223,16498,4876,1340,9595,12923,4967,18695,6345,8308,21243,20814,12845,1834,12793,5435,1873,13066,16745,19293,1743,8425,12117,13820,14444,9673,16888,21035,15354,2471,2523,13417,13690,14600,10887,8022,11017,4759,14816,20346,16251,5149,3940,5838,13235,5734,5474,12065,12650,14340,1418,14613,1795,16927,11922,17317,18084,18188,2796,6384,10029,7320,8035,2874,4005,5305,7697,10172,13469,8568,7996,14496,15120,6072,2614,456,3979,2809,3589,4278,5916,12260,9042,7372,12442,17356,18396,17109,5591,2991,12889,9660,19579,7905,20125,20372,13365,21490,13742,12962,9647,19774,6618,8594,13144,7658,15068,6436,3134,7983,9231,4928,144,18110,10523,11675,5682,11883,4785,10315,12344,4083,13131,11290,1912,3186,846,7099,9693,13794,16199,17733,9764,9790,17096,6046,14262,18890,20450,8386,21191,16472,14834,3303,6995,19228,1158,3875,20840,872,16524,6267,14587,19046,18214,19930,13027,13768,443,19436,6358,495,10133,14951,430,13560,19423,6124,9530,3966,6033,9244,12357,18916,2588,5747,1535,18175,11779,10185,16563,5201,6228,703,8152,10211,11766,6202,7463,6111,14535,1717,1275,11212,12143,7944,12728,16758,21152,7411,21321,3992,21568,10666,7359,6501,19852,15016,5266,2861,17382,885,7554,19826,1457,7567,7879,12481,8451,9387,14470,16238,19904,20463,18344,15809,7216,2939,3264,21334,10978,5448,16173,13261,16693,16979,11961,19189,1223,14925,13937,19709,14080,13599,3056,18019,14652,3043,8243,7775,12429,2445,248,4356,8867,8659,12702,1210,10757,10939,12611,10406,13924,17928,5136,18760,794,3095,170,3680,14418,19150,19254,14561,20320,1353,3420,20359,8113,13014,9738,11472,16225,21360,5422,13157,7177,1236,17291,6449,9478,15718,2952,222,3953,4811,2237,5552,2341,10991,13001,13677,5981,5084,8061,11355,573,11844,14236,17343,17707,18448,19969,20944,19735,17889,3888,4213,20580,6917,15497,3277,18682,15094,7632,12910,13833,20073,5565,1197,3732,13092,13976,14626,105,12468,287,10861,9439,8555,15185,7346,12078,11498,3693,16186,17122,9725,4135,8178,1951,5383,18786,19761,9881,4889,4577,8841,4304,15848,17603,8763,9803,2978,5110,16940,27,17655,20281,21074,8074,17642,20892,11368,3342,19345,18838,8282,20437,2757,19449,2380,8698,5123,8490,9322,131,12000,14756,2276,8737,11043,11805,13079,15874,20411,8828,599,11714,17746,5812,1574,15952,157,12416,17512,2315,1041,7931,4538,16121,3485,6813,13196,19995,4421,6982,4317,18422,989,8438,9543,15367,11628,3784,5994,6930,11987,17967,20190,20905,15341,14691,5292,9465,1782,5643,326,16615,1769,2718,274,5695,13703,11831,15835,2458,15978,19384,21412,12318,3212,20970,1561,11524,3563,20060,7008,16784,976,19241,19605,859,3524,4330,7684,8373,10068,11329,7125,2159,7190,7749,15302,15640,21399,2393,18968,1093,4616,898,2822,11342,12494,13716,15029,17902,19878,8256,15458,924,6644,209,5487,6761,7710,19813,10796,7853,11935,10614,12455,20476,11394,14977,5617,339,2497,13443,16823,15380,16875,17824,19514,5864,1119,7762,7580,16381,2224,4148,11277,15588,12546,3550,17811,8295,8347,12819,17057,1613,2510,1665,7866,13664,5773,10094,3472,5656,15731,53,4369,11896,13339,16420,14106,17213,612,6683,8711,2575,13898,5604,261,13612,16147,7437,2432,6189,11550,1431,11740,11069,3654,9561,2536,4187,15289,9361,16030,15887,15965,16017,16719,18578,6215,534,18617,12637,11662,18721,18877,12279,18903,20528,12520,21470,18058,12975,15276,18513,677,11537,3147,16316,17798,18604,19098,19332,18942,10471,16732,19072,19371,19124,21503,13313,20918,18071,19397,18266,8204,12507,13391,14665,14548,560,15913,17772,20112,14184,14158,15926,9855,9933,14717,11381,12156,4941,2328,7268,8334,6696,20931,2666,15562,1080,17330,16459,20554,16628,18812,14275,8964,20333,9426,17551,17785,14522,12832,7970,16966,16329,7502,10640,1587,6137,8932,3017,9166,9569,16849,17993,21230,19800,4720,12130,15432,16836,10770,20736,9283,6800,6709,16290,9582,300,1,17954,7242,17239,8139,8269,11615,2770,2705,6943,13638,17941,8503,9712,7385,6566,14028,11199,13911,15081,12871,20801,13534,21295,14,18799,3667,6735,10224,21607,18136,2835,12754,19488,8633,10536,781,12559,15393,17980,4226,14873,6241,18370,19644,11238,7619,17421,18539,18474,20853,19956,4668,937,12949,11186,15744,5344,11459,12585,2848,21217,6839,4915,6319,2692,1366,8529,10380,10484,13846,9218,15614,5175,10250,12598,17499,17525,14119,20879,21620,8217,20307,2107,950,4564,13326,6657,7203,7138,19696,20216,18994,20255,66,20749,4382,17200,1015,4343,807,18149,19007,16494,21282,1860,18253,19787,6332,11649,1327];
	return roots[i];
    }
function rootsMatch(i) {
	var roots[1] = [6];
	return roots[i];
    }
